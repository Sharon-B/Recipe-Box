# Recipe Box

![Responsive Image]( "Am I Responsive")

[Link to Live Project](https://recipe-box-sb.herokuapp.com/)

# Project Summary

Recipe Box was developed as a place where users can find, add, share and keep their favourite recipes online. This provides users with an easily accessible resource to store their favourite recipes and also a place to come and discover recipes added by other users.

# Contents
-


# User Experience (UX) 

# Strategy

## Developer Objectives

To grow my skills as a developer and create a simple easy to use site. Develop the project from its initial concept to the final finished product. To demonstrate my skills of Python and MongoDb, using CRUD functionality so users can create, read, update and delete information from a database. In order to do so I will create a site that allows users to add, share, keep  & update their favourite recipes online. The project will further my knowledge of Python, the Flask framework, Jinja templating language, HTML, CSS, Javascript, MongoDB and their implementation.

### Target Audience:

* Home cooks
* People looking for inspiration and meal ideas
* General public

## User Stories

### New User Stories

1.	As a user I want to be able to view recipes on my tablet device so that I can use it while cooking in the kitchen.
2. As a user I want to have my own profile where I can keep track of my own recipes
3. As a user I want a visually appealing site so that I will enjoy browsing recipes for longer.
4. As a user I want be able to check recipes on my mobile so that I can see what ingredients I may need while I’m out.
5. As a user I want to be able to contact the site owner so that I can ask any questions or offer recommendations that I may have.
6. As a user I want to be able to view the site owners social media pages so that I can see what else they are doing.
7. As a user I want to be able to browse other peoples recipes so that I can find inspiration for mealtimes.
8. As a user I want to be able to search for recipes so that I can find recipes for things I enjoy.

### Registered User Stories
9. As a registered user I want to be able to add my own recipes for safe keeping so that I can easily find them.
10. As a registered user I want to be able to update my own recipes so that I can change them as I want.
11. As a registered user I want to be able to remove my own recipes so that I can maintain what recipes I have in my profile.

### Admin User Stories
12. As a admin user I want to be able to edit/remove any recipe so that I can maintain a well curated site.
13. As an admin user I want to be able to edit/add/remove categories so that I can adapt to the changing needs of our users.
14. As an admin user I want to be able to edit/remove users so that I can keep them up to date.


## Site Owner Stories

15.	As a site owner I want to provide a good user experience for my users, so that they want to come back.

# Scope
This will be a Minimal Viable Product containing the most important core content required.

#### Functional Specifications: 

* Home
* All recipes
* Search functionality
* Full Recipe
* Contact
* Registration
* Log In
* User Profile
    - Add Recipe
    - Edit Recipe
    - Delete Recipe
* Log out functionality
* Admin functionality:
    - Manage Recipes - Edit & delete all recipes
    - Manage Categories - Add, edit & delete categories
    - Manage Users - Edit & delete users

#### Content Requirements:

* Logo.
* Navigation
* Home page
* Hero Image on home page with welcome text overlay
* Recipe Cards with images and brief recipe description
* All recipes page
* Full recipe page
* Register page with registration form & link to Log In page
* Log In page with login form & link to Registration page
* Contact form page
* User profile page
* Edit/Delete buttons for users recipes
* Add recipe page with form for adding recipe details
* Edit recipe page with form for editing recipe details
* Admin pages navigation - dropdown menu in main navbar.
* Admin manage recipes page - edit/delete any recipe
* Admin manage categories page - add/edit/delete categories
* Admin manage users page - edit/delete users
* Footer with Social media links

# Structure

### Interaction Design: 

User interactions will be intuitive and consistent throughout the site to ensure it is easy to use and quick to learn for the user. Clickable links and buttons will have a hover effect applied so they are easily identifiable when a user hovers over them.

### Information Design: 

Will allow for the prioritisation of the information to be displayed in a clear and concise manner to make it as easy as possible for the user to read and quickly find the information that is most relevant to their needs.

[Initial Site Map](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/site-map.pdf)

# Skeleton

## Wireframes:

[Home Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/home.pdf)

[Recipes Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/recipes.pdf)

[Full Recipe Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/full-recipe.pdf)

[Profile Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/profile.pdf)

[Add Recipe Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/add-recipe.pdf)

[Edit Recipe Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/edit-recipe.pdf)

[Register Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/register.pdf)

[Log In Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/login.pdf)

[Contact Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/contact.pdf)

[Manage Recipes Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/manage-recipes.pdf)

[Manage Categories Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/manage-category.pdf)

[Edit Categories Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/edit-category.pdf)

[Add Category Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/add-category.pdf)

[Manage Users Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/manage-users.pdf)

[Edit Users Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/edit-user.pdf)

[404 Error Page](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/wireframes/404.pdf)

## Difference between final design and original wireframes:

### 


###

# Surface

#### Typography:

PlayFair Display is used for the logo and headings throughout the site. It is well suited for titling. 

Roboto is used for all other text content. It’s forms are largely geometric but also features friendly and open curves, which makes for a more natural reading rhythm.

#### Colour scheme: 

![color-palette](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/color-palette/color-palette.png)

1. ![color-palette](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/color-palette/pri-color.png) Primary colour:

* Header & footer background
* Text Headings
* Highlighting text links
* Add Category/User buttons

2. ![color-palette](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/color-palette/sec-color.png) Secondary colour:

* Body background
* Logo
* Text in the header

3. ![color-palette](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/color-palette/text-color.png) Text colour:

* Recipe description
* Timings
* Ingredients list
* Method steps
* Paragraph text

4. ![color-palette](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/color-palette/accent-color.png) Accent colour:

* Flash Messages background 
* Edit, add recipe & submit buttons

5. ![color-palette](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/color-palette/warning-color.png) Warning colour:

* Delete button
* Cancel button
* Reset button

# Features 

* Responsive
* Logo
* Navigation in header which collapses for mobile use
* Recipe Cards with recipe image and a brief recipe description to display each recipe for browsing.
* Recipe name on card is a clickable link to the full recipe view
* Home page features the 6 latest recipes added
* Hero image on main page with welcome text overlay
* Pagination on all recipes, profile and manage recipes pages
* Forms for adding and editing a recipe
* Single recipe view page to see the full recipe
* Contact page with background image
* Registration page with background image
* Log in page with background image
* Log out functionality
* Form validation
* Highlight buttons on hover
* Highlight links on hover, nav links, text links
* Footer with social media links

## Future Features

* Confirm delete
* Add Favourites functionality so users can like or favourite a recipe and it would be added to their profile page for easy access.
* Add Comments - enable registered users to comment on other recipes.
* Add superuser functionality for admins.
* Build out user profile with option for profile image/avatar, allow user to delete their own profile.

# Technologies Used

[Python](https://www.python.org/) - Main language used for programming the app.

[MongoDB](https://www.mongodb.com/) - Document based database used.

[Flask](https://flask.palletsprojects.com/en/1.1.x/) - Framework used.

[Pymongo](https://pymongo.readthedocs.io/en/stable/index.html) - Used for interacting with the MongoDB Database

[Werkzeug](https://werkzeug.palletsprojects.com/en/1.0.x/) - Used to provide security features - generate password hash to salt the password and check password.

[Jinja](https://jinja.palletsprojects.com/en/2.11.x/) - Templating language used in conjunction with flask to render data in the html templates.

[Flask-Paginate](https://pythonhosted.org/Flask-paginate/) - used to implement pagination.

[Html](https://www.w3schools.com/html/html_intro.asp) - Hyper Text Markup Language, used for creating the website.

[Css](https://www.w3schools.com/css/) - Cascading Style Sheet, used for styling the website.

[Javascript](https://www.javascript.com) – Used for providing functionality for the contact form.

[Emailjs API](https://www.emailjs.com/) - Used for the contact form.

[Bootstrap](https://getbootstrap.com) - Bootstrap grid system.

[Google Fonts](https://fonts.google.com) - The 2 fonts used throughout the website are from Google fonts.

[Balsamiq](https://balsamiq.com) – Used for creating the wireframes.

[Git](https://git-scm.com/) - Used for version control.

[GitHub](https://github.com) - Used to store the project repository.

[Gitpod IDE](https://www.gitpod.io/) - Development environment where the site was built.

[Heroku](https://signup.heroku.com/) - Where the live site is deployed.

[Gimp 2.1](https://www.gimp.org/) - Used for editing, scaling images and creating a favicon.

[Tiny png](https://tinypng.com) - Used for compressing images.

[Webaim contrast checker](https://webaim.org/resources/contrastchecker/) - Used to check the contrast between the text font and background colours.

[Chrome Dev Tools](https://developers.google.com/web/tools/chrome-devtools) - Used throughout the development of the website to quickly see changes, find problems and debug. Also used to view website in different device views.

[Lighthouse](https://developers.google.com/web/tools/lighthouse) in Chrome Dev Tools.

[AutoPrefixer](https://autoprefixer.github.io/) - Used to add vendor prefixes onto the CSS code to ensure compatibility with various browsers.

[W3C HTML validator](https://validator.w3.org/) - Used to validate code.

[W3C CSS validator](https://jigsaw.w3.org/css-validator/) - Used to validate code.

[JSHint](https://jshint.com/) – Used to validate Javascript code

[Coolors](https://coolors.co/) - Used for selecting complimentary colour palettes.

[Unsplash](https://unsplash.com/) – Used for finding background images.

[GitHub Wiki TOC generator](https://ecotrust-canada.github.io/markdown-toc/) - Used for creating a table of contents in README.md

# Implementation 

Once the initial concept for the project was decided upon I first developed the wireframes and site map. From these wireframes I then developed the basic database structure required. I created 3 collections for the database, a users collection, a recipes collection & a categories collection. The database schema can be seen [here]((https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/initial-db-schema.png)).

I then set up the Flask app, created the environment variables needed to run the app, created requirements.txt for all dependencies used and set up a Procfile. I connected the app to MongoDB and tested it by rendering a a basic test recipe document from the recipes collection in html. The project was deployed to Heroku which I set to automatic deployment so that anytime I push code to GitHub it is able to automatically get the latest code and build the app.

Now that the infrastructure of the app was set up I could start to build the app, first I set up a base.html from which all my html templates would be extended from. As I added a route & view function in app.py I created the associated html template, also utilising Jinja templating language to insert the data into the html pages.

Note: Initially I was going to use WTForms, however after talking to Tutor Support I decided against it. I had initially installed WTForms & Flask-WTF, created a forms.py file and a RegisterForm which I had imported into app.py. Towards the end of the project I uninstalled WTForms & Flask-WTF, and updated the requirements.txt file to reflect this. I also removed forms.py from the file directory and the form import in app.py.

## Issues/Solutions

I was getting an error in the console as my scripts.js file with my emailjs code for the contact form was loading on every page. I have the function setup to window.onload so it was giving an error when loading the other pages ie not the contact page. To resolve this I moved the emailjs code into it's own emailjs.js file and set up a script at the bottom of the contact.html page so that this only loads now when the contact.html page is opened.

The edit_user() function was overwriting the whole document eventhough only the username and/or email and not the password field were being updated. To resolve this I added $set to the edit_user() function so that it would update specific fields only.

Search was not functioning properly since adding in the pagination only the first page would be returned. Initially I was going to just remove the pagination from this page but after researching this on Slack I found a solution thanks to [Edb83](https://github.com/Edb83/self-isolution). In order to get the search query to also work with pagination it was necessary to set query = request.args.get("query") in the search function and set method="GET" in the search form and in the search route. 

Chrome Dev Tools showed a warning in the console for autocomplete on the username and password fields of the registration and log in forms. To remove this I added the autocomplete attribute for username & password inputs On the login form I set autocomplete="username" for the username & autocomplete="current-password" for the password input field.
On the register form I set autocomplete="username" for the username & autocomplete="new-password" for the password input field. This ensures that the browser does not try to autocomplete a username or password where it could possibly autocomplete with somebody else's password/username.

I was getting the following warning in the console in Chrome Dev Tools:

    DevTools failed to load SourceMap: Could not load content for http://recipe-box-sb.herokuapp.com/bootstrap.min.css.map: HTTP error: status code 404, net::ERR_HTTP_RESPONSE_CODE_FAILURE

After some research on [Stackoverflow](https://stackoverflow.com/questions/61339968/devtools-failed-to-load-sourcemap-could-not-load-content-for-chrome-extension), I discovered that this is something within Chrome Dev Tools and I could remove the warning by going to Settings in Chrome Dev Tools and in Sources I could disable the options: "Enable javascript source maps" & "Enable CSS source maps"

Commit history - merge conflict. I had a merge conflict in gitpod when trying to commit. It occurred after doing a ‘git —amend’ to fix a typo in the last commit which I did and then worked on and did another commit after which when I tried to ‘git push’ I got the following:
        On branch master
        Your branch and 'origin/master' have diverged,
        and have 1 and 2 different commits each, respectively.
          		(use "git pull" to merge the remote branch into yours)
I did a ‘git pull’ and then pushed with a Fix merge conflict, merge TESTING.md commit. When I then looked at my commit history, the commit I had amended is still there with the typo and the amended commit without the typo. See affected commits below.

![merge-conflict](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/merge-conflict.png)

## Known Bugs

Bugs found and not fixed:

* The following warnings regarding pagination appear in Gitpod for app.py:

![gitpod-warnings](https://github.com/Sharon-B/Recipe-Box/blob/master/readme-documentation/gitpod-pagination-warnings.png)

As pagination is currently working it was decided to leave these warnings for now.


# Database Collections

 ## users:

  _id: Object_id

  username: string

  email: string

  password: string

## categories:

  _id: Object_id

  category_name: string

## recipes:

  _id: Object_id

  img_url: url

  recipe_name: string

  recipe_description: string

  category_name: string

  prep_time: string

  cook_time: string

  ingredients: array

  method: array

  added_by: string

# Deployment

This website was created in the Gitpod development environment. After creating a new repository in GitHub using the Code Institute template, the green Gitpod button was used to initialise the repository in Gitpod. Throughout the process the git commands `git add` and `git commit` were used to store the work in the local Gitpod environment, `git push` would then be used to push the commits to the GitHub repository. From here the website could then deployed via Heroku.

## Heroku Deployment:

Before creating the application in Heroku, 

1. Create a requirements.txt file in your work environment by running the following command in the command line interface:

	`pip3 freeze —local > requirements.txt`

This will save all the dependencies currently used by the app to the requirements.txt file.

2. Create a Procfile, which tells Heroku which file runs the app and how to run it. To do this run the following command in the CLI:

	`echo web: python app.py > Procfile`

3. `Git add`, `git commit` and `git push` these files to GitHub so they are available to Heroku which will use them to build the app.

## In Heroku:

1. Login and click New -> Create New App
	- Add a name
	- Select region
	- Click Create App

2. Select Connect to GitHub, when the Github profile is displayed add the name of your repo and click search, once it finds & displays the correct repo click connect.

3. Set up the config vars required to run the app. In the Settings Tab click Revel Config Vars
- Create the following variables and assign their values:
            IP, PORT, SECRET_KEY, MONGO_URI, MONGO_DBNAME
- Click Hide Config Vars

4. In the Deploy Tab
	- Click Enable Automatic Deploys
	- Select the branch the repo is using
	- Click Deploy Branch
 => Your app was successfully deployed will be displayed with the option to view the app.

## Creating A Local Clone:
You can clone the repository to create a local copy on your computer.

From the Git Hub repository:
- Click `Code` at the top of the file list
- Click the clipboard icon to copy the url provided

Open terminal:
- Change the current working directory to where you want the cloned directory to be
- Type `git clone` and paste the copied url after it
- Press enter and the clone will be created

# Credits

## Code

Code Snippet 1: [Edb83](https://github.com/Edb83/self-isolution/blob/master/app.py) - Using pagination & updating the search query to work with pagination.

## Resources

[Code Institute](https://codeinstitute.net/) course material and mini projects form the main resource for this project.

[Bootstrap Documentation](https://getbootstrap.com/docs/4.1/getting-started/introduction/) - General resource.

[W3Schools](https://www.w3schools.com/) - General resource.

[MDN web docs](https://developer.mozilla.org/en-US/) - General resource.

[CSS Tricks](https://css-tricks.com/) - General resource.

[Flask docs](https://flask.palletsprojects.com/en/1.1.x/) - General resource.

[Emailjs docs](https://www.emailjs.com/docs/) - General resource.

[Regex101](https://regex101.com/) - General resource.

[Jinja docs](https://jinja.palletsprojects.com/en/2.11.x/) - General resource.

[Werzeug docs](https://werkzeug.palletsprojects.com/en/1.0.x/) - General resource.

[PyMongo Docs](https://pymongo.readthedocs.io/en/stable/) - General resource.

[Falsk-Paginate Demo](https://gist.github.com/mozillazg/69fb40067ae6d80386e10e105e6803c9)

Anna Greaves How to Approach Writing Your README File webinar.

## Content

Welcome message is written by myself.

All Recipes are from BBC Good Food website:

[Super Green Smoothie](https://www.bbcgoodfood.com/recipes/clean-green-smoothie)

[Piri Piri Chicken With Sweet Potatoes](https://www.bbcgoodfood.com/recipes/piri-piri-chicken-smashed-sweet-potatoes-broccoli)

[Breakfast egg wraps](https://www.bbcgoodfood.com/recipes/breakfast-egg-wraps)

[Breakfast Muffins](https://www.bbcgoodfood.com/recipes/breakfast-muffins)

[Smoked Salmon And Quinoa Lunch Bowl](https://www.bbcgoodfood.com/recipes/smoked-salmon-quinoa-dill-lunch-pot)

[Coconut & Squash Dhansak](https://www.bbcgoodfood.com/recipes/coconut-squash-dhansak)

[Lemon Drizzle Sponge Pudding](https://www.bbcgoodfood.com/recipes/lemon-drizzle-sponge-pudding)

[Avocado & Cannellini Bean Dip](https://www.bbcgoodfood.com/recipes/avocado-cannellini-bean-dip)

[Thai Prawn & Ginger Noodles](https://www.bbcgoodfood.com/recipes/thai-prawn-ginger-noodles)

[The Classic Negroni](https://www.bbcgoodfood.com/recipes/classic-negroni)

## Media

Images from [Unsplash](https://unsplash.com/):

Hero Image credit: Photo by [Lily Banse](https://unsplash.com/photos/-YHSwy6uqvk) on [Unsplash](https://unsplash.com/)

Register page image credit: Photo by [Brooke Lark](https://unsplash.com/photos/oaz0raysASk) on [Unsplash](https://unsplash.com/)

Log in page image credit: Photo by [Edgar Castrejon](https://unsplash.com/photos/1SPu0KT-Ejg) on [Unsplash](https://unsplash.com/)

Contact page image credit: Photo by [Joseph Gonzalez](https://unsplash.com/photos/zcUgjyqEwe8) on [Unsplash](https://unsplash.com/)
  

## Acknowledgements

My mentor @spence_mentor for great support and positivity throughout.

All at Code Institute and Tutor support.

The Slack Community for their ever present knowledge.

##  Disclaimer

This project is for educational purposes only.